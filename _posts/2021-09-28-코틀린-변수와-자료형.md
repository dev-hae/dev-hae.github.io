---
layout: post
title: "코틀린 변수와 "
author: "hae"
tags: Kotlin
excerpt_separator: <!--more-->
---

## 코틀린 패키지



프로젝트 > 모듈 > 패키지 > 파일(클래스)로 구성<!--more-->

모듈 : 기능을 분리해서 관리

패키지

- 파일의 이름이 같아도 패키지가 다르면 오류가 발생하지 않음
- 같은 패키지에 속해 있다면 다른 파일에서 정의한 선언일지라도 직접 사용할 수 있음 but, 다른 패키지에 정의한 선언을 사용하려면 임포트를 통해 선언해야함

## 변수와 자료형

val - 최초로 지정한 변수의 값으로 초기화하고 더 이상 바꿀 수 없음 (like final)

var - 최초로 지정한 변수의 초기값이 있더라도 값을 바꿀 수 있음

- 코틀린은 자료형을 지정하지 않고 변수를 선언해도 알아서 자료형을 지정함 ⇒ 자료형을 추론한다.
- 자료형을 지정하지 않으려면 값을 할당해야함
- 기본적으로는 모든 변수를 val 키워드를 사용해 불변 변수로 선언하고, ㅏ중에 필요할 때만 var로 변경해랑

코틀린은 참조형 자료형을 사용함

참조형 vs 자료형

참조형

→ 객체를 생성하고 동적 메모리 영역에 데이터를 둔 다음 이것을 참조하는 자료형

→ 스택에 값이 아닌 참조 주소가 저장되고 실제 객체는 동적 메모리인 힘에 저장

기본형

→ 가공되지 않은 순수한 자료형, 프로그래밍 언어에 내장

→ 스택(임시 메모리)에 저장, 값이 저장된 메모리의 크기도 고정

기본형이 참조형보다 코드 수행시간이 빠름

(코틀린에서는 성능 최적화를 위해 코틀린 컴파일러에서 다시 기본형으로 대체)

문자열 자료형을 저장하는 String Pool

문자열은 배열 형태로 저장



​	예제

​		val str1 = "Hello"

​		val str2 = "Hello"

​		val str3 = "World"



str1, str2는 문자열이 같은데 이때 해당 문자열을 스택에 2번 저장하는것이 아니라 String Pool에 문자열 "Hello"를 저장하고 이 값을 str1, str2가 참조

문자열 안에 변수의 값이나 표현식을 출력하려면 $사용해서 출력

이때, 중괄호로 감싸면 처리가 쉽고 코드를 분석하기도 쉬움


  예제

​		val a = 1

​		val str = " a = $a"

​		val str2 = "a = ${a}"

​		println(str1)

​		print(str2)

​		a = 1

​		a = 1




문자열을 통째로 출력하려면(""")로 츌력하면 됨

## 자료형 검사하고 변환하기

코틀린은 변수를 사용할 떄 반드시 값이 할당 되어야 함

null을 사용하려면 var a : String? = "test"  처럼 ?를 이용해 널처리를 해줘야함

**String? 과 String은 다른 자료형임

null을 잘못 사용할시 NPE예외가  발생할 수 있으므로 ?를 사용할 시 처리를 해야함

Null 처리 방법

세이프 콜

?. : null이 할당되어 있을 가능성이 있는 볁수를 검사해 안전하게 호출

단정 기호

.!! : 컴파일 할때 Null검사를 무시함 → NPE를 발생시킬 수 있으므로 주의

엘비스 연산자

변수가 null인지 아닌지를 검사해 null이 아니면 왼쪽 식을 그대로 실행하고 null이라면 오른쪽 식을 실행

Str?.length ? : -1

= if(Str != null) str1.length else -1

자료형 비교

코틀린에서는 자료형이 서로 다른 변수를 비교하거나 연산 할 수 없음 → toInt() 처럼 자료형을 변환한다음 비교

이중 등호 ( == ) 단순히 값만 비교

삼중 등호 ( === ) 참조 주소를 비교


  예제
		val a = 1
		val b = 1
		val c? = 1

		a == b → true
		a == c  → true
		a === b → true
		a === c → false


스마트 캐스트

컴파일러가 자동으로 형 변환을 함

Number → 2.1 을 저장하면 Float, 2를 저장하면 Int로 자동 변환

자료형 검사 - is

자료형 변환 - as

Any

- 자료형이 특별히 정해지지 않은 경우에 사용(슈퍼 클래스)
- 무엇이든 될 수 있으므로 언제든 필요한 자료형으로 자동 변환 ( 묵시적 변환)

문 vs 식

문(statement) : 자신을 둘러싸고 잇는 가장 안쪽의 최상위 요소로 존재하며 아무런 값을 만들어 내지 않음

식(expression) : 값을 만들어 내며 다른 식의 하위 요소로 계산에 참여 할 수 있음

코틀린에서 if는 식임 ( 코틀린에서 루프문을 제외한 대부분의 제어구조가 식임)

```kotlin
fun max (a:Int, b:Int) : Int {
	return if(a>b) a else b
} //1

fun max (a:Int, b:Int) : Int = if(a>b) a else b //2

fun max (a:Int, b:Int) = if (a> b) a else b //3
```

블록이 본문인 함수 : 중괄호로 둘러싸인 함수 ( like 1)

식이 본문인 함수 : 등호와 식으로 이뤄진 함수 ( like 2,3)

1,2,3은 모두 같은 함수임

코틀린에서는 반환 타입을 생략해도 컴파일러가 식을 분석해 지정 → 타입 추론

이때 식이 본문인 함수만 생략 가능

클래스 - 캡슐화가 목적

멤버 필드를 비공개로 하고

getter를 통해 읽을 수 있게 해주고 setter를 통해 수정할 수 있게 해줌



프로퍼티 = 필드 + 접근자

코틀린은 값을 저장하기 위한 비공개 필드와 그 필드에 값을 저장하기 위한 세터, 필드 값을 읽기 위한 게터로 이뤄진 간단한 디폴트 접근자 구현을 제공

**setOf - 집합 set객체로 만드는 함수. 원소가 모여있는 컬렉션으로 순서는 중요하지 않음

**스마트 캐스트 - 어떤 변수가 원하는 타입인지 일단 is로 검사하면 이후에 변수를 캐스팅 안해도 처음부터 그 변수가 원하는 타입으로 선언된 것 처럼 사용할 수 있다.
